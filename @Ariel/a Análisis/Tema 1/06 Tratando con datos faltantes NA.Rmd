---
title: "Trabajo con datos faltantes"
output: html_notebook
---

### ¿Cómo trabajar con datos faltantes (Missing Data)?
\

Para trabajar con datos faltantes, vamos a usar un CSV en el cual faltan algunas observaciones (_missing-data.csv_). 

* Como siempre, vamos a guardar el CSV en una variable para no tener que acceder constantemente con toda la ruta. 
* Si no indicamos nada, los espacios vacíos se leerán como $NAs$. 
* Pero para evitar ambigüedades, vamos a indicarlo específicamente con al argumento _**na.strings = ""**_.

```{r}
data <- read.csv("/Users/macbookariel/Library/Mobile Documents/com~apple~CloudDocs/@ARIEL/AADD/DataScience/DataScience-con-RStudio/@Ariel/b Datos/tema1/missing-data.csv", na.strings = "")
```
\

El siguiente paso sería limpiar el dataframe, es decir, ver qué opciones tenemos para trabajar con los datos no disponibles ($NA$). Tenemos varias opciones.
\
\

#### a) Omitir los $NA$

```{r}
data.cleaned <- na.omit(data)
```
\

Con esta sintaxis hemos transformado a ceros, todos los $NAs$. Sin embargo, es posible que otras veces querramos otras versiones no tan destructivas.
\
\

#### b) Limpieza de $NA$ de variables seleccionadas.
\

Por ejemplo, con una limpieza selectiva por columnas. En el siguiente ejemplo haríamos una extracción selectiva de todos las filas donde no hay $NAs$ dentro de la columna "Income" y nos quedaríamos con todas las columnas. Toda esta extracción la guardamos en una nueva variable que se llamará data.income.cleaned (**COMPARAR ESTA VARIABLE CON LA PROPIA DATA QUE ES LA ORIGINAL**).

```{r}
#Limpiar NAs solamente de la variable INCOME
data.income.cleaned <- data[!is.na(data$Income),]
```
\

Otra operación para obtener el mismo resultado que utilizando _**na.omit**_ es usar la sintaxis _**complete.cases**_. Esta función devuelve un array de datos booleanos y podríamos hacer una extracción selectiva quedándonos con todas la filas que estén completas y con todas las columnas:

```{r}
data.cleaned.2 <- data[complete.cases(data),]
```
\

En definitiva, es muy similar a otras vías por lo que es común llegar al mismo resultado por distintas vías.

Como dato llamativo en la columna de "Ingresos (Income)" se trata de que hay valores que son cero. Es posible que realmente se refieran a $NAs$ así que podemos reemplazar los ceros con $NA$. La sintaxis es la siguiente:

```{r}
#Accedemos al vector que representa la columna Income y dentro del vector accedemos a aquellos valores que son exactamente iguales a cero
data$Income[data$Income == 0] <- NA

# OJO PORQUE CAMBIAMOS EL DATAFRAME ORIGINAL
```
\

Otra opción sería reemplazar los datos con un valor promedio. El problema que tenemos siempre que intentamos usar medidas de centralización en presencia de $NA$, es que el resultado siempre es $NA$. Aunque es una medida de seguridad para hacernos saber que existen datos desconocidos y que podrían falsear el cálculo, algunas veces nos interesa seguir con el cálculo. Para ello, usaremos la función _**na.rm = TRUE**_ (rm = remove). Por ejemplo:

```{r}
mean(data$Income)
mean(data$Income, na.rm = T)
```

\
\
































































